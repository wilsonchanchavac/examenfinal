@page
@model proyectofinal.Pages.Ventas.DetalleModel; 
@{
    ViewData["Title"] = "Detalle Venta";
}

<div class="container">
    <div class="row">
        <div class="col-8 offset-2">
            <div class="text-info">Detalle de Venta</div>
            <ul class="list-group">
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.CodigoVenta)</li>
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.CodigoCliente.NombresCliente)</li>
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.CodigoCliente.ApellidosCliente)</li>
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.CodigoCliente.NITCliente)</li>
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.FechaVenta)</li>
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.TipoVenta)</li>
                <li class="list-group-item">@Html.DisplayFor(m => m.Venta.EstadoVenta)</li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <a asp-page="/DetalleVentas/Crear" asp-route-id="@Model.ventaId" class="btn btn-success">Agregar detalle</a>
        </div>
    </div>


    <br />
    @if (Model.DetallesVenta.Count() > 0)
    {
        <table id="tblClientes" class="table table-striped table-bordered tables alert-warning" style="width: 100%">
            <thead>
                <tr>
                    <th>@Html.DisplayNameFor(m => m.DetallesVenta.FirstOrDefault().CodigoProducto.CodigoProducto)</th>
                    <th>@Html.DisplayNameFor(m => m.DetallesVenta.FirstOrDefault().CodigoProducto.NombreProducto)</th>
                    <th>@Html.DisplayNameFor(m => m.DetallesVenta.FirstOrDefault().CodigoProducto.FechaVencimiento)</th>
                    <th>@Html.DisplayNameFor(m => m.DetallesVenta.FirstOrDefault().CodigoProducto.CodigoProveedor.NombreProveedor)</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var producto in Model.DetallesVenta)
                {
                    <tr>
                        <td>@Html.DisplayFor(m => producto.CodigoProducto.CodigoProducto)</td>
                        <td>@Html.DisplayFor(m => producto.CodigoProducto.NombreProducto)</td>
                        <td>@Html.DisplayFor(m => producto.CodigoProducto.FechaVencimiento)</td>
                        <td>@Html.DisplayFor(m => producto.CodigoProducto.CodigoProveedor.NombreProveedor)</td>
                        <td>
                            <a class="btn btn-danger" asp-page="../DetalleVentas/Borrar" asp-route-id="@producto.CodigoDetalle">Devolver producto</a>
                        </td>
                    </tr>
                }

            </tbody>
        </table>
    }
    else
    {
        <p>No hay Productos que mostrar</p>
    }


    <div class="row">
        <div class="col-6">
            <a asp-page="Index" class="btn btn-success">Volver</a>
        </div>
    </div>
</div>
